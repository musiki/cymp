---
const label = 'Tema';
---
<button
  id="theme-toggle"
  aria-label={label}
  style="cursor:pointer; background:none; border:1px solid var(--c-border); padding:.4rem .6rem; border-radius:.4rem;"
>
  🌙 / ☀️
</button>

<script>
  // aplica tema inicial lo antes posible
  (function () {
    const k = 'theme';
    const stored = localStorage.getItem(k);
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = stored || (prefersDark ? 'dark' : 'light');
    document.documentElement.classList.toggle('dark', theme === 'dark');
  })();

  // toggle al click
  document.getElementById('theme-toggle')?.addEventListener('click', () => {
    const k = 'theme';
    const isDark = document.documentElement.classList.toggle('dark');
    localStorage.setItem(k, isDark ? 'dark' : 'light');
  });
</script>